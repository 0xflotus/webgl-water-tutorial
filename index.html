<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
  </head>
  <body>

    <div id="webgl-water-tutorial" height="150" width="150" />

      <script src='/webgl_water_tutorial.js'></script>

      <script>
        window.addEventListener('load', function () {
          window.wasm_bindgen('/webgl_water_tutorial_bg.wasm')
            .then(function () {
              // Start our rust application. You can find `WebClient` in `src/lib.rs`
              var webClient = new window.wasm_bindgen.WebClient()
              webClient.start()

              // FIXME: https://github.com/rustwasm/wasm-bindgen/blob/master/examples/request-animation-frame/src/lib.rs
              let time = Date.now();
              function render () {
                const dt = Date.now() - time

                webClient.update(dt)
                webClient.render()
                window.requestAnimationFrame(render)

                time = Date.now()
              }

              render()
            })
        })

      </script>

  </body>
</html>
